<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro Rota</title>
  <style>
    body{
      font-family:Arial;
      margin:0;
      padding:24px;
      color:#eaf0ff;

      /* Fundo com a imagem + escurecimento para manter leg√≠vel */
      background:
        linear-gradient(rgba(11,15,20,0.88), rgba(11,15,20,0.88)),
        url("coe.jpg") no-repeat center center fixed;
      background-size: cover;
    }

    .card{
      max-width:560px;
      margin:0 auto;
      background:rgba(18,26,36,0.92);
      padding:20px;
      border-radius:14px;
      border:1px solid #223047;
      backdrop-filter: blur(2px);
    }

    h1{margin:0 0 10px 0;font-size:20px}
    label{display:block;margin:12px 0 6px}
    input,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #2a3a55;background:#0b0f14;color:#eaf0ff}
    button{width:100%;margin-top:16px;padding:12px;border:0;border-radius:12px;background:#2b6fff;color:#fff;font-weight:700;cursor:pointer}
    .ok{margin-top:12px;color:#7CFFB2}
    .err{margin-top:12px;color:#FF7C7C}
  </style>
</head>
<body>
  <div class="card">
    <h1>üìã Registro COE</h1>

    <form id="f">
      <label>Nome</label>
      <input name="nome" required>

      <label>Passaporte</label>
      <input name="passaporte" required inputmode="numeric">

      <label>Recrutador</label>
      <input name="recrutador" required>

      <label>ID Discord (opcional)</label>
      <input name="discord_id" placeholder="123456789012345678" inputmode="numeric">

      <button type="submit">Enviar</button>
      <div id="msg"></div>
    </form>
  </div>

<script>
const WEBHOOK_URL = "https://discord.com/api/webhooks/1450882766043353110/LkpOL01stYbDhvn0jSO7gDU77fZsCXoCcU-e80lhIseJfe9C4cmPj2LCFRSkAOsdRrun";
const TRIAGEM_CHANNEL_ID = "1450882352137109544";

document.getElementById("f").addEventListener("submit", async (e) => {
  e.preventDefault();
  const fd = new FormData(e.target);

  const nome = fd.get("nome").trim();
  const passaporte = fd.get("passaporte").trim();
  const recrutador = fd.get("recrutador").trim();
  const discord_id = (fd.get("discord_id") || "").trim();
  const mention = discord_id ? `<@${discord_id}>` : "‚Äî";

  const payload = {
    content: `üß† **REGISTRO COE** ‚Üí <#${TRIAGEM_CHANNEL_ID}>`,
    embeds: [{
      title: "Solicita√ß√£o para Triagem",
      description:
        `üë§ **Nome:** ${nome}\n`+
        `ü™™ **Passaporte:** ${passaporte}\n`+
        `üéñÔ∏è **Recrutador:** ${recrutador}\n`+
        `üë• **Discord:** ${mention}\n`,
      footer: { text: "Use ‚úÖ aprovar / ‚ùå reprovar (responda com o modelo padr√£o)." }
    }]
  };

  const msg = document.getElementById("msg");
  msg.textContent = "Enviando...";
  msg.className = "";

  try {
    const r = await fetch(WEBHOOK_URL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });
    if (!r.ok) throw new Error();
    msg.textContent = "‚úÖ Enviado para triagem!";
    msg.className = "ok";
    e.target.reset();
  } catch {
    msg.textContent = "‚ùå Erro ao enviar (webhook inv√°lido).";
    msg.className = "err";
  }
});
</script>
</body>
</html>

